<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAWT Escape Room: The Painting Truth</title>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Times New Roman', Times, serif;
            background: #1a0000;
            color: #000000;
        }
        #game-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: background 1s ease;
        }
        #intro-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            z-index: 10;
        }
        #black-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            opacity: 0;
            z-index: 11;
            pointer-events: none;
        }
        #loading-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            border: 5px solid #ff1a1a;
            border-top: 5px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: none;
            z-index: 12;
        }
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        #lock {
            position: absolute;
            font-size: 120px;
            color: #ff1a1a;
            text-shadow: 0 0 10px #ff0000;
            z-index: 15;
            display: none;
        }
        .glitch {
            animation: glitch 0.3s infinite alternate;
        }
        .glitch-text {
            animation: glitch-text 0.2s infinite alternate;
        }
        .twitch {
            animation: twitch 0.3s infinite alternate;
        }
        .glitch-page {
            animation: glitch-page 0.2s infinite alternate;
        }
        @keyframes glitch {
            0% { transform: translate(0, 0); opacity: 1; }
            20% { transform: translate(5px, -5px); opacity: 0.7; }
            40% { transform: translate(-5px, 5px); opacity: 0.5; }
            60% { transform: translate(3px, 3px); opacity: 0.8; }
            80% { transform: translate(-3px, -3px); opacity: 0.6; }
            100% { transform: translate(0, 0); opacity: 1; }
        }
        @keyframes glitch-text {
            0% { transform: skew(0deg); opacity: 1; color: #000000; }
            20% { transform: skew(5deg); opacity: 0.8; color: #cc00cc; }
            40% { transform: skew(-5deg); opacity: 0.6; color: #000000; }
            60% { transform: skew(3deg); opacity: 0.9; color: #cc00cc; }
            80% { transform: skew(-3deg); opacity: 0.7; color: #000000; }
            100% { transform: skew(0deg); opacity: 1; color: #000000; }
        }
        @keyframes twitch {
            0% { transform: translate(0, 0); }
            20% { transform: translate(3px, -3px); }
            40% { transform: translate(-3px, 3px); }
            60% { transform: translate(2px, -2px); }
            80% { transform: translate(-2px, 2px); }
            100% { transform: translate(0, 0); }
        }
        @keyframes glitch-page {
            0% { transform: translate(0, 0); }
            20% { transform: translate(5px, -5px); }
            40% { transform: translate(-5px, 5px); }
            60% { transform: translate(3px, 3px); }
            80% { transform: translate(-3px, -3px); }
            100% { transform: translate(0, 0); }
        }
        .fade-out {
            animation: fadeOut 1s forwards;
        }
        .fade-in {
            animation: fadeIn 1s forwards;
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .dim {
            animation: dim 10s linear forwards;
        }
        @keyframes dim {
            from { opacity: 1; }
            to { opacity: 0.1; }
        }
        .scary-end {
            animation: scary-end 2s infinite alternate;
        }
        @keyframes scary-end {
            0% { transform: scale(1); opacity: 1; color: #ff1a1a; }
            20% { transform: scale(1.1) skew(5deg); opacity: 0.7; color: #cc00cc; }
            40% { transform: scale(0.9) skew(-5deg); opacity: 0.5; color: #ff1a1a; }
            60% { transform: scale(1.05) skew(3deg); opacity: 0.8; color: #cc00cc; }
            80% { transform: scale(0.95) skew(-3deg); opacity: 0.6; color: #ff1a1a; }
            100% { transform: scale(1); opacity: 1; color: #ff1a1a; }
        }
        #room {
            text-align: center;
            max-width: 80%;
        }
        #story {
            font-size: 28px;
            text-shadow: 0 0 5px #ffffff;
            margin-bottom: 20px;
            white-space: pre-wrap;
            overflow: hidden;
            border-right: 2px solid #ffffff;
            animation: typing 5s steps(40, end), blink-caret 0.75s step-end infinite, glitch-text 0.2s infinite alternate;
        }
        #riddle {
            font-size: 24px;
            text-shadow: 0 0 5px #ffffff;
            margin-bottom: 20px;
            white-space: pre-wrap;
            overflow: hidden;
            border-right: 2px solid #ffffff;
            animation: typing 5s steps(40, end), blink-caret 0.75s step-end infinite, glitch-text 0.2s infinite alternate;
        }
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: #ffffff; }
        }
        #clue-bar {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #2a0000;
            padding: 10px;
            border: 2px solid #ff3333;
            border-radius: 5px;
        }
        #timer {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            color: #ff1a1a;
            text-shadow: 0 0 5px #ff0000;
            font-family: 'Creepster', cursive;
        }
        #clue-button, #submit-button, #home-button {
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            background: #660000;
            border: none;
            color: #ff9999;
            border-radius: 5px;
            font-family: 'Times New Roman', Times, serif;
            font-size: 24px;
        }
        #clue-button.glitch-red {
            background: #ff0000;
            animation: glitch 0.3s infinite alternate;
        }
        #home-button {
            display: none;
        }
        #code-input {
            padding: 10px;
            margin: 10px;
            font-size: 24px;
            background: #2a0000;
            color: #000000;
            border: 2px solid #ff3333;
            border-radius: 5px;
            font-family: 'Times New Roman', Times, serif;
            text-shadow: 0 0 5px #ffffff;
        }
        #dial-pad {
            display: none;
            grid-template-columns: repeat(3, 60px);
            gap: 10px;
            margin: 20px auto;
        }
        .dial-button {
            width: 60px;
            height: 60px;
            background: #330000;
            border: 2px solid #ff3333;
            color: #ff9999;
            font-family: 'Times New Roman', Times, serif;
            font-size: 24px;
            cursor: pointer;
            border-radius: 5px;
            text-align: center;
            line-height: 60px;
        }
        .dial-button:hover {
            background: #660000;
        }
        #message {
            margin-top: 10px;
            font-size: 36px;
            text-shadow: 0 0 5px #ffffff;
            display: none;
            font-family: 'Times New Roman', Times, serif;
            animation: glitch-text 0.2s infinite alternate, twitch 0.3s infinite alternate;
        }
        #message.wrong {
            display: block;
        }
        #message.game-over {
            font-size: 48px;
            color: #ff1a1a;
            text-shadow: 0 0 10px #ff0000;
            animation: scary-end 2s infinite alternate;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="black-screen" class="flicker"></div>
        <div id="loading-circle"></div>
        <iframe id="intro-video" src="https://www.youtube.com/embed/S8ZvgZF7ia0?autoplay=1&mute=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        <div id="lock" class="glitch">ðŸ”“</div>
        <audio id="scream-sound" preload="auto">
            <!-- Replace with your eerie sound file -->
            <source src="path/to/scream.mp3" type="audio/mp3">
        </audio>
        <audio id="transition-sound" preload="auto">
            <!-- Replace with your transition sound file -->
            <source src="path/to/creepy-transition.mp3" type="audio/mp3">
        </audio>
        <div id="timer">20:00</div>
        <div id="room">
            <div id="clue-bar">
                Clues: <span id="clue-count">0</span>
                <button id="clue-button">Get Clue</button>
            </div>
            <div id="story"></div>
            <div id="riddle"></div>
            <h1 id="room-title" style="font-family: 'Creepster', cursive;">Room 1</h1>
            <input type="text" id="code-input" placeholder="Enter answer or code">
            <div id="dial-pad">
                <div class="dial-button" data-value="1">1</div>
                <div class="dial-button" data-value="2">2</div>
                <div class="dial-button" data-value="3">3</div>
                <div class="dial-button" data-value="4">4</div>
                <div class="dial-button" data-value="5">5</div>
                <div class="dial-button" data-value="6">6</div>
                <div class="dial-button" data-value="7">7</div>
                <div class="dial-button" data-value="8">8</div>
                <div class="dial-button" data-value="9">9</div>
            </div>
            <button id="submit-button">Submit</button>
            <button id="home-button">Home</button>
            <div id="message"></div>
        </div>
    </div>
    <script>
        const rooms = [
            {
                code: "FEAR",
                clue: "The paintings watch you with malice. What do they make you feel?",
                story: "You awake in a cursed gallery, paintings glaring with eyes that follow. Their gaze whispers a riddle to escape.",
                background: "https://images.pexels.com/photos/2088210/pexels-photo-2088210.jpeg" // Shadowy monster
            },
            {
                code: "BLOOD",
                clue: "The canvas drips with this substance.",
                story: "The walls ooze red, a canvas weeping a word that binds the damned.",
                background: "https://images.pexels.com/photos/1441058/pexels-photo-1441058.jpeg" // Blood and skulls
            },
            {
                code: "GHOST",
                clue: "The figure in the portrait that moves when you turn away.",
                story: "A portraitâ€™s figure vanishes, leaving a word etched in frost.",
                background: "https://images.pexels.com/photos/572708/pexels-photo-572708.jpeg" // Ghostly shapes
            },
            {
                code: "SCREAM",
                clue: "The sound echoing from the walls.",
                story: "A scream pierces the silence, its source a word carved into stone.",
                background: "https://images.pexels.com/photos/3750777/pexels-photo-3750777.jpeg" // Demonic figures
            },
            {
                code: "CURSE",
                clue: "The spell binding the galleryâ€™s victims.",
                story: "The air hums with a malevolent spell, its name written in shadows.",
                background: "https://images.pexels.com/photos/305839/pexels-photo-305839.jpeg" // Cursed ambiance
            },
            {
                code: "DEATH",
                clue: "The fate of those who fail to escape.",
                story: "A skeletal hand scrawls a word on the floor, a warning of doom.",
                background: "https://images.pexels.com/photos/3682157/pexels-photo-3682157.jpeg" // Skulls and bones
            },
            {
                code: "PAINT",
                clue: "The medium that traps the souls.",
                story: "Paint cans spill, forming a word that seals the galleryâ€™s curse.",
                background: "https://images.pexels.com/photos/459038/pexels-photo-459038.jpeg" // Paint with eerie shapes
            },
            {
                code: "EYES",
                clue: "They watch you from every canvas.",
                story: "Eyes in the paintings glow, their word burning in the dark.",
                background: "https://images.pexels.com/photos/167964/pexels-photo-167964.jpeg" // Monster eyes
            },
            {
                code: "VOID",
                clue: "The darkness behind the torn canvas.",
                story: "A torn canvas reveals a black abyss, whispering a single word.",
                background: "https://images.pexels.com/photos/373543/pexels-photo-373543.jpeg" // Dark void with creatures
            },
            {
                code: "SOUL",
                clue: "What the gallery steals from you.",
                story: "A mirror reflects no face, only a word etched in blood.",
                background: "https://images.pexels.com/photos/235985/pexels-photo-235985.jpeg" // Soul-like shadows
            },
            {
                code: "BONE",
                clue: "The remains scattered on the floor.",
                story: "Bones crunch underfoot, spelling a word in the dim light.",
                background: "https://images.pexels.com/photos/1762851/pexels-photo-1762851.jpeg" // Skulls and monsters
            },
            {
                code: "8421",
                clue: "The final key to skip rooms lies in the monsterâ€™s gaze.",
                story: "Monsters from forgotten games leer, skulls grinning. Enter the final code to skip ahead.",
                background: "https://images.pexels.com/photos/2088209/pexels-photo-2088209.jpeg" // Monster-heavy with skulls
            }
            // Extend to 30 rooms, e.g.:
            // { code: "HAUNT", clue: "The sound of footsteps behind you.", story: "Footsteps echo, forming a word in the dark.", background: "https://images.pexels.com/photos/235985/pexels-photo-235985.jpeg" }
        ];
        let currentRoom = 0;
        let clueCount = 0;
        let levelsCompleted = 0;
        let clueAttempts = 0;
        let inSpecialRoom = false;
        let timeLeft = 1200; // 20 minutes in seconds

        const blackScreen = document.getElementById('black-screen');
        const loadingCircle = document.getElementById('loading-circle');
        const introVideo = document.getElementById('intro-video');
        const lock = document.getElementById('lock');
        const roomDisplay = document.getElementById('room');
        const clueButton = document.getElementById('clue-button');
        const clueCountDisplay = document.getElementById('clue-count');
        const submitButton = document.getElementById('submit-button');
        const homeButton = document.getElementById('home-button');
        const codeInput = document.getElementById('code-input');
        const dialPad = document.getElementById('dial-pad');
        const message = document.getElementById('message');
        const roomTitle = document.getElementById('room-title');
        const storyDisplay = document.getElementById('story');
        const riddleDisplay = document.getElementById('riddle');
        const timerDisplay = document.getElementById('timer');
        const gameContainer = document.getElementById('game-container');
        const screamSound = document.getElementById('scream-sound');
        const transitionSound = document.getElementById('transition-sound');

        // Set initial background and riddle
        gameContainer.style.background = `url('${rooms[0].background}') no-repeat center/cover`;
        riddleDisplay.textContent = rooms[0].clue;

        // Disable clue and home buttons initially
        clueButton.disabled = true;
        homeButton.style.display = 'none';

        // Timer logic
        function updateTimer() {
            if (timeLeft <= 0) {
                endGame();
                return;
            }
            timeLeft--;
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            if (timeLeft <= 10) {
                roomDisplay.classList.add('glitch-page', 'dim');
                timerDisplay.style.opacity = 1; // Keep timer visible
            }
            setTimeout(updateTimer, 1000);
        }

        // Start game with fade-out and video
        window.onload = () => {
            roomDisplay.classList.add('fade-out');
            storyDisplay.textContent = rooms[0].story;
            setTimeout(() => {
                blackScreen.style.display = 'block';
                blackScreen.classList.add('fade-in', 'flicker');
                transitionSound.play().catch(() => {});
                setTimeout(() => {
                    introVideo.style.display = 'block';
                    setTimeout(() => {
                        proceedToGame();
                    }, 10000); // Play YouTube video for 10 seconds
                }, 1000);
            }, 1000);
            updateTimer();
        };

        // Proceed to game after video
        function proceedToGame() {
            introVideo.style.display = 'none';
            blackScreen.classList.add('fade-out');
            setTimeout(() => {
                blackScreen.style.display = 'none';
                blackScreen.classList.remove('flicker');
                roomDisplay.classList.remove('fade-out');
                roomDisplay.classList.add('fade-in');
                message.textContent = '';
            }, 1000);
        }

        // End game sequence
        function endGame() {
            roomDisplay.style.display = 'none';
            timerDisplay.style.display = 'none';
            blackScreen.style.display = 'block';
            blackScreen.classList.add('fade-in');
            loadingCircle.style.display = 'block';
            setTimeout(() => {
                loadingCircle.style.display = 'none';
                message.textContent = "YOU LOST";
                message.classList.add('wrong', 'game-over');
                message.style.display = 'block';
                setTimeout(() => {
                    message.textContent = "GAME OVER";
                    message.classList.add('scary-end');
                    screamSound.play().catch(() => {});
                }, 3000);
            }, 4000);
        }

        // Handle clue button
        clueButton.addEventListener('click', () => {
            clueAttempts++;
            if (levelsCompleted >= 2 && clueCount < 1) {
                clueCount++;
                clueCountDisplay.textContent = clueCount;
                message.textContent = rooms[currentRoom].clue;
            } else {
                clueButton.classList.add('glitch-red');
                screamSound.play().catch(() => {});
                message.textContent = levelsCompleted < 2 ? "Complete two levels to unlock a clue!" : "No more clues available!";
                setTimeout(() => {
                    clueButton.classList.remove('glitch-red');
                }, 1000);
            }
        });

        // Handle home button
        homeButton.addEventListener('click', () => {
            currentRoom = 0;
            inSpecialRoom = false;
            roomTitle.textContent = `Room 1`;
            storyDisplay.textContent = rooms[0].story;
            riddleDisplay.textContent = rooms[0].clue;
            gameContainer.style.background = `url('${rooms[0].background}') no-repeat center/cover`;
            codeInput.value = '';
            codeInput.style.display = 'inline-block';
            dialPad.style.display = 'none';
            message.textContent = '';
            homeButton.style.display = 'none';
            submitButton.style.display = 'inline-block';
            clueButton.style.display = 'inline-block';
            roomDisplay.classList.add('fade-in');
        });

        // Handle dial pad buttons
        document.querySelectorAll('.dial-button').forEach(button => {
            button.addEventListener('click', () => {
                codeInput.value += button.getAttribute('data-value');
            });
        });

        // Handle code submission
        submitButton.addEventListener('click', () => {
            const input = codeInput.value.trim().toUpperCase();
            if (inSpecialRoom) {
                if (input === rooms[rooms.length - 1].code) {
                    transitionToRoom(6); // Skip to Room 7 (skipping 5 rooms: 2-6)
                } else {
                    message.textContent = "WRONG";
                    message.classList.add('wrong');
                    screamSound.play().catch(() => {});
                    homeButton.style.display = 'inline-block';
                    setTimeout(() => {
                        transitionToRoom(1); // Auto-advance to Room 2
                    }, 3000);
                }
            } else if (currentRoom === 0) {
                if (input === rooms[0].code) {
                    transitionToRoom(1); // Correct riddle, go to Room 2
                } else if (input === '9904') {
                    inSpecialRoom = true;
                    roomTitle.textContent = "Cursed Chamber";
                    storyDisplay.textContent = rooms[rooms.length - 1].story;
                    riddleDisplay.textContent = rooms[rooms.length - 1].clue;
                    gameContainer.style.background = `url('${rooms[rooms.length - 1].background}') no-repeat center/cover`;
                    codeInput.value = '';
                    codeInput.style.display = 'none';
                    dialPad.style.display = 'grid';
                    message.textContent = "Enter the final code using the dial pad.";
                    roomDisplay.classList.add('fade-in');
                } else {
                    message.textContent = "WRONG";
                    message.classList.add('wrong');
                    screamSound.play().catch(() => {});
                    homeButton.style.display = 'inline-block';
                    setTimeout(() => {
                        transitionToRoom(1); // Auto-advance to Room 2
                    }, 3000);
                }
            } else if (input === rooms[currentRoom].code) {
                levelsCompleted++;
                if (levelsCompleted >= 2) clueButton.disabled = false;
                message.textContent = "Correct! The lock opens.";
                transitionToNextRoom();
            } else {
                message.textContent = "WRONG";
                message.classList.add('wrong');
                screamSound.play().catch(() => {});
                setTimeout(() => {
                    message.classList.remove('wrong');
                    message.textContent = '';
                    codeInput.value = '';
                }, 3000);
            }
        });

        // Transition to next room
        function transitionToNextRoom() {
            roomDisplay.classList.add('fade-out');
            transitionSound.play().catch(() => {});
            setTimeout(() => {
                blackScreen.style.display = 'block';
                blackScreen.classList.add('fade-in', 'flicker');
                setTimeout(() => {
                    lock.style.display = 'block';
                    lock.classList.add('glitch');
                    setTimeout(() => {
                        lock.style.display = 'none';
                        lock.classList.remove('glitch');
                        currentRoom++;
                        if (currentRoom < rooms.length - 1) {
                            roomTitle.textContent = `Room ${currentRoom + 1}`;
                            storyDisplay.textContent = rooms[currentRoom].story;
                            riddleDisplay.textContent = rooms[currentRoom].clue;
                            gameContainer.style.background = `url('${rooms[currentRoom].background}') no-repeat center/cover`;
                            codeInput.value = '';
                            message.textContent = '';
                            codeInput.style.display = 'inline-block';
                            dialPad.style.display = 'none';
                            blackScreen.classList.add('fade-out');
                            setTimeout(() => {
                                blackScreen.style.display = 'none';
                                blackScreen.classList.remove('flicker');
                                roomDisplay.classList.remove('fade-out');
                                roomDisplay.classList.add('fade-in');
                            }, 1000);
                        } else {
                            storyDisplay.textContent = "You escaped... but the gallery's curse lingers in your soul.";
                            riddleDisplay.textContent = "";
                            roomTitle.textContent = "Escape Complete";
                            message.textContent = "Congratulations! You survived!";
                            gameContainer.style.background = `url('https://images.pexels.com/photos/1762851/pexels-photo-1762851.jpeg') no-repeat center/cover`;
                            codeInput.style.display = 'none';
                            submitButton.style.display = 'none';
                            clueButton.style.display = 'none';
                            roomDisplay.classList.remove('fade-out');
                            roomDisplay.classList.add('fade-in');
                            blackScreen.style.display = 'none';
                            blackScreen.classList.remove('flicker');
                        }
                    }, 2000); // Glitch lock for 2 seconds
                }, 1000);
            }, 1000);
        }

        // Transition to specific room
        function transitionToRoom(roomIndex) {
            roomDisplay.classList.add('fade-out');
            transitionSound.play().catch(() => {});
            setTimeout(() => {
                blackScreen.style.display = 'block';
                blackScreen.classList.add('fade-in', 'flicker');
                setTimeout(() => {
                    lock.style.display = 'block';
                    lock.classList.add('glitch');
                    setTimeout(() => {
                        lock.style.display = 'none';
                        lock.classList.remove('glitch');
                        currentRoom = roomIndex;
                        inSpecialRoom = false;
                        roomTitle.textContent = `Room ${currentRoom + 1}`;
                        storyDisplay.textContent = rooms[currentRoom].story;
                        riddleDisplay.textContent = rooms[currentRoom].clue;
                        gameContainer.style.background = `url('${rooms[currentRoom].background}') no-repeat center/cover`;
                        codeInput.value = '';
                        message.textContent = '';
                        codeInput.style.display = 'inline-block';
                        dialPad.style.display = 'none';
                        homeButton.style.display = 'none';
                        blackScreen.classList.add('fade-out');
                        setTimeout(() => {
                            blackScreen.style.display = 'none';
                            blackScreen.classList.remove('flicker');
                            roomDisplay.classList.remove('fade-out');
                            roomDisplay.classList.add('fade-in');
                        }, 1000);
                    }, 2000);
                }, 1000);
            }, 1000);
        }
    </script>
</body>
</html>
